# Generated By ChatGPT, not working, the logic seems right, need to modify. 
- name: Convert Bash Script to Ansible Playbook
  hosts: localhost

  vars_prompt:
    - name: openai_api_key
      prompt: "Enter your OpenAI API key"
      private: yes
    - name: bash_script_path
      prompt: "Enter the path to the Bash script to convert"

  tasks:
    - name: Read contents of Bash script
      shell: cat "{{ bash_script_path }}"
      register: script_contents
      check_mode: no

    - name: Generate Ansible playbook with OpenAI GPT-3
      uri:
        url: "https://api.openai.com/v1/engines/davinci-codex/completions"
        method: POST
        body_format: json
        headers:
          Content-Type: "application/json"
          Authorization: "Bearer {{ openai_api_key }}"
        body:
          prompt: "Can you convert this Bash script to an Ansible playbook? {{ script_contents.stdout }}"
          max_tokens: 1000
          n: 1
          stop: "\n"
      register: response

    - name: Display generated Ansible playbook
      debug:
        var: response.json.choices[0].text